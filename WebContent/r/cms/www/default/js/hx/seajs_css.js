function isType(a){return function(b){return{}.toString.call(b)=="[object "+a+"]"}}function isFunction(a){return"[object Function]"=={}.toString.call(a)}function request(a,b,c){var d=IS_CSS_RE.test(a),e=doc.createElement(d?"link":"script");if(c){var f=isFunction(c)?c(a):c;f&&(e.charset=f)}addOnload(e,b,d,a),d?(e.rel="stylesheet",e.href=a):(e.async=!0,e.src=a),currentlyAddingScript=e,baseElement?head.insertBefore(e,baseElement):head.appendChild(e),currentlyAddingScript=null}function addOnload(a,b,c,d){function e(){a.onload=a.onerror=a.onreadystatechange=null,c||seajs.data.debug||head.removeChild(a),a=null,b()}var f="onload"in a;return!c||!isOldWebKit&&f?void(f?(a.onload=e,a.onerror=function(){seajs.emit("error",{uri:d,node:a}),e()}):a.onreadystatechange=function(){/loaded|complete/.test(a.readyState)&&e()}):void setTimeout(function(){pollCss(a,b)},1)}function pollCss(a,b){var c,d=a.sheet;if(isOldWebKit)d&&(c=!0);else if(d)try{d.cssRules&&(c=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(c=!0)}setTimeout(function(){c?b():pollCss(a,b)},20)}function dirname(a){return a.match(DIRNAME_RE)[0]}function realpath(a){for(a=a.replace(DOT_RE,"/"),a=a.replace(MULTI_SLASH_RE,"$1/");a.match(DOUBLE_DOT_RE);)a=a.replace(DOUBLE_DOT_RE,"/");return a}function normalize(a){var b=a.length-1,c=a.charAt(b);return"#"===c?a.substring(0,b):".js"===a.substring(b-2)||a.indexOf("?")>0||".css"===a.substring(b-3)||"/"===c?a:a+".js"}function parseAlias(a){var b=data.alias;return b&&isString(b[a])?b[a]:a}function parsePaths(a){var b,c=data.paths;return c&&(b=a.match(PATHS_RE))&&isString(c[b[1]])&&(a=c[b[1]]+b[2]),a}function parseVars(a){var b=data.vars;return b&&a.indexOf("{")>-1&&(a=a.replace(VARS_RE,function(a,c){return isString(b[c])?b[c]:a})),a}function parseMap(a){var b=data.map,c=a;if(b)for(var d=0,e=b.length;e>d;d++){var f=b[d];if(c=isFunction(f)?f(a)||a:a.replace(f[0],f[1]),c!==a)break}return c}function addBase(a,b){var c,d=a.charAt(0);if(ABSOLUTE_RE.test(a))c=a;else if("."===d)c=realpath((b?dirname(b):data.cwd)+a);else if("/"===d){var e=data.cwd.match(ROOT_DIR_RE);c=e?e[0]+a.substring(1):a}else c=data.base+a;return 0===c.indexOf("//")&&(c=location.protocol+c),c}function id2Uri(a,b){if(!a)return"";a=parseAlias(a),a=parsePaths(a),a=parseVars(a),a=normalize(a);var c=addBase(a,b);return c=parseMap(c)}function getScriptAbsoluteSrc(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}var isString=isType("String"),doc=document,head=doc.head||doc.getElementsByTagName("head")[0]||doc.documentElement,baseElement=head.getElementsByTagName("base")[0],IS_CSS_RE=/\.css(?:\?|$)/i,currentlyAddingScript,interactiveScript,isOldWebKit=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i,"$1")<536;seajs.request=request;var data=seajs.data,DIRNAME_RE=/[^?#]*\//,DOT_RE=/\/\.\//g,DOUBLE_DOT_RE=/\/[^/]+\/\.\.\//,MULTI_SLASH_RE=/([^:/])\/+\//g,PATHS_RE=/^([^/:]+)(\/.+)$/,VARS_RE=/{([^{]+)}/g,ABSOLUTE_RE=/^\/\/.|:\//,ROOT_DIR_RE=/^.*?\/\/.*?\//,doc=document,cwd=location.href&&0!==location.href.indexOf("about:")?dirname(location.href):"",scripts=doc.scripts,loaderScript=doc.getElementById("seajsnode")||scripts[scripts.length-1],loaderDir=dirname(getScriptAbsoluteSrc(loaderScript)||cwd);seajs.resolve=id2Uri;